<!--
  Generated by AI-Powered README Generator
  Repository: https://github.com/GDSC-FSC/gdg-fsc-x-bc-cloud-workshop
  Generated: 2025-10-07T17:56:50.093Z
  Format: md
  Style: comprehensive
-->

# üçï NYC Restaurant Safety Finder

[![GitHub Workflow Status](https://img.shields.io/badge/status-active-brightgreen.svg)](https://github.com/GDSC-FSC/gdg-fsc-x-bc-cloud-workshop/actions)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://github.com/GDSC-FSC/gdg-fsc-x-bc-cloud-workshop/blob/main/LICENSE)
[![Python Version](https://img.shields.io/badge/python-3.8%2B-blue.svg)](https://www.python.org/downloads/)
[![Latest Release](https://img.shields.io/github/v/release/GDSC-FSC/gdg-fsc-x-bc-cloud-workshop?include_prereleases&sort=semver)](https://github.com/GDSC-FSC/gdg-fsc-x-bc-cloud-workshop/releases)

A powerful Typer + Rich CLI acting as an Agent2Agent client to query NYC health inspection data via a Cloud Run agent. Seamlessly filter, visualize, and get insights into restaurant safety.

---

## üß≠ Table of Contents

-   [Overview](#overview--introduction)
-   [üöÄ Feature Highlights](#-feature-highlights)
-   [üèóÔ∏è Architecture & Design](#%EF%B8%8F-architecture--design)
    -   [High-Level Components](#high-level-components)
    -   [Technology Stack](#technology-stack)
    -   [Project Structure](#project-structure)
-   [‚ö° Getting Started](#-getting-started)
    -   [Prerequisites](#prerequisites)
    -   [Installation](#installation)
    -   [Configuration](#configuration)
    -   [Running Locally](#running-locally)
-   [üí° Usage & Workflows](#-usage--workflows)
    -   [Quick Start](#quick-start)
    -   [Command Reference](#command-reference)
    -   [Examples](#examples)
-   [‚ö†Ô∏è Limitations & Future Roadmap](#%EF%B8%8F-limitations--future-roadmap)
    -   [Current Limitations](#current-limitations)
    -   [Known Issues](#known-issues)
    -   [Future Enhancements](#future-enhancements)
-   [ü§ù Contributing](#-contributing)
    -   [How to Contribute](#how-to-contribute)
    -   [Development Setup](#development-setup)
    -   [Running Tests](#running-tests)
-   [üìú License, Credits & Contact](#-license-credits--contact)
    -   [License](#license)
    -   [Acknowledgments](#acknowledgments)
    -   [Maintainers & Support](#maintainers--support)
-   [üìö Appendix](#-appendix)
    -   [FAQ](#faq)
    -   [Troubleshooting](#troubleshooting)
    -   [Changelog](#changelog)

---

## üìñ Overview / Introduction

The **NYC Restaurant Safety Finder** is a command-line interface (CLI) application designed to empower users with easy access to the vast NYC health inspection data. Built with Python using `Typer` for the CLI and `Rich` for beautiful terminal output, it acts as a client to a serverless backend agent hosted on Google Cloud Run. This backend agent, in turn, queries processed health inspection data stored efficiently in Google Cloud Storage (GCS) and managed by BigQuery.

### Purpose & Goals

The primary goal of this application is to:
*   **Democratize Data Access**: Make complex NYC health inspection data easily searchable and understandable for the public.
*   **Enhance Transparency**: Provide insights into restaurant safety grades and inspection results.
*   **Showcase Modern Cloud Architecture**: Demonstrate a scalable and cost-effective solution using Agent2Agent communication and Google Cloud services.
*   **Provide a Developer-Friendly Tool**: Offer a robust CLI for direct interaction and a clear example of cloud-native application development.

### Why it Matters / Problem it Solves

Navigating large, raw public datasets like NYC health inspection records can be daunting. This application solves the problem of:
*   **Data Overload**: Condensing vast amounts of data into actionable insights.
*   **Accessibility**: Providing a simple command-line interface, abstracting away the complexities of data storage and querying.
*   **Responsiveness**: Leveraging serverless architecture to provide quick responses to queries without managing servers.
*   **Interoperability**: Demonstrating how different services (agents) can communicate and chain together for enhanced functionality (e.g., geocoding, alerts).

### Target Audience

*   **Developers & Cloud Practitioners**: Interested in Python CLI development, Agent2Agent patterns, and Google Cloud services (Cloud Run, BigQuery, GCS).
*   **NYC Residents & Visitors**: Anyone curious about the health inspection status of restaurants in New York City.
*   **Data Enthusiasts**: Looking for an accessible way to explore public health data.
*   **Educators & Students**: For learning about modern application architecture and data interaction.

[‚¨ÜÔ∏è Back to Top](#%EF%B8%8F-table-of-contents)

---

## üöÄ Feature Highlights

The NYC Restaurant Safety Finder offers a rich set of features to make querying health inspection data both powerful and intuitive:

*   ‚úÖ **Intuitive CLI**: Built with `Typer` for a user-friendly command-line experience.
*   ‚ú® **Rich Terminal Output**: Utilizes `Rich` for beautifully formatted tables, progress bars, and color-coded health grades, enhancing readability.
*   üè¢ **Borough Filtering**: Easily narrow down your search to specific NYC boroughs (Manhattan, Brooklyn, Queens, Bronx, Staten Island).
*   üçï **Cuisine Filtering**: Filter restaurants by cuisine type, supporting partial string matching for flexibility.
*   üìä **Grade Filtering**: Search for establishments based on their minimum health inspection grade (A, B, C, P, Z).
*   üó∫Ô∏è **Interactive Maps**: Generate HTML maps directly from your search results, visualizing restaurant locations for a better overview.
*   üö® **Smart Alerts (Agent Chaining)**: Optionally trigger alerts for restaurants with concerning health grades by chaining to an external alerting agent.
*   üîó **Agent2Agent Communication**: Designed as a client in an Agent2Agent architecture, seamlessly communicating with a Cloud Run backend for data processing and additional services.
*   üìç **Geocoding Integration**: Leverage agent chaining for on-the-fly geocoding of restaurant addresses when generating maps.
*   üß™ **Offline Mock Mode**: Automatically switches to mock data when the Cloud Run agent is unavailable, allowing for local development and demonstration without a live backend.

> üí° **Tip:** Combine multiple filters for highly specific searches, e.g., "Pizza places in Brooklyn with a grade A or better."

[‚¨ÜÔ∏è Back to Top](#%EF%B8%8F-table-of-contents)

---

## üèóÔ∏è Architecture & Design

This application is designed around a modern, scalable Agent2Agent (A2A) architecture, leveraging Google Cloud Platform services for robust data handling and serverless execution.

### High-Level Components

The core architecture involves a client CLI interacting with a backend agent, which itself may interact with other specialized agents.

```mermaid
graph TD
    subgraph Client
        CLI_App[nyc-restaurants CLI]
    end

    subgraph Backend Services (Google Cloud Run)
        CR_Agent[NYC Restaurants Cloud Run Agent]
    end

    subgraph Data Layer (Google Cloud)
        BQ[BigQuery: Processed Restaurant Data]
        GCS[Google Cloud Storage: Raw Inspection Data]
    end

    subgraph External Agents (Cloud Run, etc.)
        Geocoding[Geocoding Agent]
        Alerting[Alerting Agent]
    end

    CLI_App -- REST API Calls --> CR_Agent
    CR_Agent -- Queries --> BQ
    BQ -- Reads from --> GCS
    CR_Agent -- (Optional) Geocodes Addresses --> Geocoding
    CR_Agent -- (Optional) Sends Notifications --> Alerting
```

**Component Responsibilities:**

*   **NYC Restaurants CLI (`nyc-restaurants`)**:
    *   **User Interface**: Provides an interactive command-line interface using `Typer` and `Rich`.
    *   **Request Orchestration**: Constructs API requests based on user input and sends them to the Cloud Run Agent.
    *   **Response Rendering**: Parses API responses and displays results in a user-friendly format (tables, maps).
    *   **Configuration Management**: Handles local configuration for the agent URL.

*   **NYC Restaurants Cloud Run Agent (`CR_Agent`)**:
    *   **API Gateway**: Exposes a REST API (`/query`, `/geocode`, `/alert`) for the CLI and other services.
    *   **Data Abstraction**: Translates incoming requests into BigQuery queries.
    *   **Data Retrieval & Processing**: Queries health inspection data from BigQuery, potentially enriching it.
    *   **Agent Chaining**: Delegates specialized tasks (like geocoding or sending alerts) to other dedicated agents.
    *   **Scalability**: Runs on Google Cloud Run, automatically scaling to handle varying loads.

*   **BigQuery (`BQ`)**:
    *   **Analytical Database**: Stores and allows for complex querying of processed NYC health inspection data.
    *   **Performance**: Optimized for large-scale data analysis and fast query execution.

*   **Google Cloud Storage (`GCS`)**:
    *   **Object Storage**: Stores raw or semi-processed NYC health inspection datasets.
    *   **Reliability & Scalability**: Provides durable storage for the foundational data.

*   **Geocoding Agent**:
    *   **Location Services**: A separate microservice (potentially another Cloud Run instance) responsible for converting addresses into geographical coordinates (latitude, longitude).
    *   **Decoupling**: Keeps geocoding logic separate from the main data querying service.

*   **Alerting Agent**:
    *   **Notification Service**: A dedicated microservice (e.g., Cloud Run, Cloud Functions) responsible for sending notifications or triggering alerts based on specific criteria (e.g., low health grades).
    *   **Integration**: Can integrate with various notification platforms (email, Slack, etc.).

### Technology Stack

*   **Client (CLI)**:
    *   **Python 3.8+**: The core programming language.
    *   **Typer**: For building the command-line interface.
    *   **Rich**: For beautiful and interactive terminal output.
    *   **Pydantic**: For data validation and settings management.
    *   **Requests**: For making HTTP requests to the Cloud Run agent.
    *   **Folium**: For generating interactive HTML maps.
*   **Backend (Cloud Run Agent - see `examples/`)**:
    *   **Python 3.8+**: Core language.
    *   **FastAPI / Flask**: For building the REST API.
    *   **Google Cloud Client Libraries**: For interacting with BigQuery and GCS.
    *   **Pydantic**: For request/response model validation.
*   **Cloud Infrastructure**:
    *   **Google Cloud Run**: Serverless compute for hosting the backend agent.
    *   **Google BigQuery**: Data warehouse for health inspection data.
    *   **Google Cloud Storage (GCS)**: Object storage for raw data.

### Project Structure

The repository is organized to clearly separate the CLI client from example backend implementations and general project files.

```
gdsc-fsc-gdg-fsc-x-bc-cloud-workshop/
‚îú‚îÄ‚îÄ README.md                      # This documentation file
‚îú‚îÄ‚îÄ config.example.env             # Example environment variables for configuration
‚îú‚îÄ‚îÄ demo.py                        # A script to showcase CLI features
‚îú‚îÄ‚îÄ pyproject.toml                 # Poetry configuration for project metadata
‚îú‚îÄ‚îÄ requirements.txt               # Python package dependencies for the CLI
‚îú‚îÄ‚îÄ examples/                      # Directory for backend agent examples and deployment guides
‚îÇ   ‚îú‚îÄ‚îÄ README.md                  # Specific README for examples, incl. deployment
‚îÇ   ‚îú‚îÄ‚îÄ cloud_run_agent.py         # Example Python Cloud Run agent implementation
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile                 # Dockerfile for building the Cloud Run agent image
‚îÇ   ‚îî‚îÄ‚îÄ requirements-agent.txt     # Python dependencies for the Cloud Run agent
‚îî‚îÄ‚îÄ nyc_restaurant_finder/         # Source code for the CLI application
    ‚îú‚îÄ‚îÄ __init__.py                # Initializes the Python package
    ‚îú‚îÄ‚îÄ agent_client.py            # Handles communication with the Cloud Run agent
    ‚îú‚îÄ‚îÄ cli.py                     # Main Typer CLI application logic
    ‚îú‚îÄ‚îÄ display.py                 # Utilities for Rich-based terminal output
    ‚îî‚îÄ‚îÄ models.py                  # Pydantic data models for requests, responses, and settings
```

[‚¨ÜÔ∏è Back to Top](#%EF%B8%8F-table-of-contents)

---

## ‚ö° Getting Started

Follow these steps to get the NYC Restaurant Safety Finder CLI up and running on your local machine.

### Prerequisites

Before you begin, ensure you have the following installed:

*   **Python**: Version 3.8 or higher.
    *   [Download Python](https://www.python.org/downloads/)
*   **pip**: Python's package installer (usually comes with Python).
*   **Git**: For cloning the repository.
    *   [Download Git](https://git-scm.com/downloads)
*   **(Optional) Google Cloud SDK**: If you plan to deploy or interact with the backend agent yourself.
    *   [Install gcloud CLI](https://cloud.google.com/sdk/docs/install)

### Installation

1.  **Clone the repository:**
    ```bash
    git clone https://github.com/GDSC-FSC/gdg-fsc-x-bc-cloud-workshop.git
    cd gdg-fsc-x-bc-cloud-workshop
    ```

2.  **Install Python dependencies:**
    ```bash
    pip install -r requirements.txt
    ```

3.  **Install the CLI in editable mode (for development or system-wide access):**
    ```bash
    pip install -e .
    ```
    This makes the `nyc-restaurants` command available in your terminal.

### Configuration

The CLI needs to know the URL of your deployed Cloud Run agent.

1.  **Set the Cloud Run agent URL as an environment variable:**
    Replace `https://your-cloud-run-service.run.app` with the actual URL of your deployed agent.
    ```bash
    export NYC_RESTAURANTS_AGENT_URL="https://your-cloud-run-service.run.app"
    ```
    > üí° **Tip:** For persistent configuration, you can add this line to your shell's profile file (e.g., `~/.bashrc`, `~/.zshrc`) or create a `.env` file in the project root.

2.  **Using a `.env` file:**
    Copy the provided example and fill in your agent URL:
    ```bash
    cp config.example.env .env
    # Edit .env and set NYC_RESTAURANTS_AGENT_URL
    ```
    The CLI will automatically load variables from a `.env` file if found.

3.  **Passing the URL directly (per command):**
    You can also override the environment variable by passing `--agent-url` to any command:
    ```bash
    nyc-restaurants search --agent-url https://your-service.run.app --borough manhattan
    ```

#### Deploying the Backend Agent

If you don't have a backend agent deployed, you can use the example provided in the `examples/` directory.

<details>
<summary>Click to view Backend Agent Deployment Instructions</summary>

The `examples/` directory contains a basic Cloud Run agent (`cloud_run_agent.py`) and a `Dockerfile` to deploy it.

1.  **Navigate to the examples directory:**
    ```bash
    cd examples/
    ```

2.  **Authenticate `gcloud`:**
    Ensure you are logged into your Google Cloud account and have the correct project selected.
    ```bash
    gcloud auth login
    gcloud config set project YOUR_PROJECT_ID
    ```

3.  **Build and push the Docker image to Container Registry:**
    Replace `YOUR_PROJECT_ID` with your actual Google Cloud Project ID.
    ```bash
    gcloud builds submit --tag gcr.io/YOUR_PROJECT_ID/nyc-restaurants-agent
    ```

4.  **Deploy the image to Cloud Run:**
    Choose a region close to you (e.g., `us-central1`).
    ```bash
    gcloud run deploy nyc-restaurants-agent \
      --image gcr.io/YOUR_PROJECT_ID/nyc-restaurants-agent \
      --platform managed \
      --region us-central1 \
      --allow-unauthenticated # Allow public access; for production, consider IAM
    ```

5.  **Note the Service URL:**
    After successful deployment, the `gcloud run deploy` command will output a "Service URL". This is the `NYC_RESTAURANTS_AGENT_URL` you need for the CLI configuration.

6.  **Return to the root directory:**
    ```bash
    cd ..
    ```

For more detailed instructions, refer to `examples/README.md`.
</details>

### Running Locally

Once installed and configured, you can run the CLI from your terminal:

```bash
# Get help information
nyc-restaurants --help

# Test your agent connection
nyc-restaurants test-agent

# Try a search (if agent is configured or using mock data)
nyc-restaurants search --borough manhattan --cuisine pizza
```

[‚¨ÜÔ∏è Back to Top](#%EF%B8%8F-table-of-contents)

---

## üí° Usage & Workflows

The `nyc-restaurants` CLI provides several commands to interact with the NYC health inspection data.

### Quick Start

Here are some common commands to get you started immediately:

```bash
# Search for pizza places in Manhattan with grade A or better
nyc-restaurants search --borough manhattan --cuisine pizza --min-grade A

# Get detailed information about a specific restaurant
nyc-restaurants details "Joe's Pizza" --borough manhattan

# Search with map visualization (requires a deployed agent with geocoding capability)
nyc-restaurants search --borough brooklyn --map

# Test the connection to your configured Cloud Run agent
nyc-restaurants test-agent

# Show your current configuration (e.g., agent URL)
nyc-restaurants config --show
```

### Command Reference

The `nyc-restaurants` CLI is built with `Typer`, offering intuitive command structures. You can always use `--help` for any command or subcommand to get detailed options.

#### `nyc-restaurants search` - Search restaurants

Searches for restaurants based on various criteria and displays results in a rich table.

```bash
nyc-restaurants search [OPTIONS]

Options:
  -b, --borough [MANHATTAN|BROOKLYN|QUEENS|BRONX|STATEN_ISLAND]
                                  Filter by NYC borough.
  -c, --cuisine TEXT              Filter by cuisine type (partial match supported).
  -g, --min-grade [A|B|C|P|Z]     Minimum health inspection grade (A is best, Z is pending).
  -l, --limit INTEGER             Maximum number of results to display (1-1000, default: 100).
  -m, --map                       Generate and open an HTML map with restaurant locations.
  --alert                         Send alerts for concerning health grades (requires alerting agent).
  --agent-url TEXT                Cloud Run agent URL to use for this command.
  --help                          Show this message and exit.
```

#### `nyc-restaurants details` - Get restaurant details

Retrieves and displays detailed information for a specific restaurant by name.

```bash
nyc-restaurants details RESTAURANT_NAME [OPTIONS]

Arguments:
  RESTAURANT_NAME  The exact name of the restaurant to get details for.

Options:
  -b, --borough [MANHATTAN|BROOKLYN|QUEENS|BRONX|STATEN_ISLAND]
                                  Specify the borough to narrow down the search for the restaurant.
  --agent-url TEXT                Cloud Run agent URL to use for this command.
  --help                          Show this message and exit.
```

#### `nyc-restaurants config` - Manage configuration

Manages the local configuration settings for the CLI, primarily the agent URL.

```bash
nyc-restaurants config [OPTIONS]

Options:
  --show                          Display the current configuration settings.
  --set-agent-url TEXT            Set or update the Cloud Run agent URL.
  --help                          Show this message and exit.
```

#### `nyc-restaurants test-agent` - Test agent connection

Tests the connectivity and responsiveness of the configured Cloud Run agent.

```bash
nyc-restaurants test-agent [OPTIONS]

Options:
  --agent-url TEXT            Cloud Run agent URL to test.
  --help                      Show this message and exit.
```

### Examples

Here are more comprehensive examples demonstrating various use cases.

#### Basic Search

```bash
# All restaurants in Manhattan (limited to default 100)
nyc-restaurants search --borough manhattan

# Pizza places with grade A or better, anywhere in NYC
nyc-restaurants search --cuisine pizza --min-grade A

# Top 10 restaurants in Brooklyn (by internal ranking/default sort)
nyc-restaurants search --borough brooklyn --limit 10

# Search for Italian restaurants in Queens with any grade B or higher
nyc-restaurants search --borough queens --cuisine italian --min-grade B
```

#### Advanced Features

```bash
# Search in Staten Island and generate an interactive map
nyc-restaurants search --borough staten_island --map

# Search in the Bronx and trigger alerts for concerning grades (if agent supports)
nyc-restaurants search --borough bronx --alert

# Get details for a famous eatery, specifying borough for precision
nyc-restaurants details "Katz's Delicatessen" --borough manhattan

# Test a specific agent URL without changing your default configuration
nyc-restaurants test-agent --agent-url https://my-dev-agent.run.app
```

#### Configuration Management

```bash
# Show your currently configured agent URL and other settings
nyc-restaurants config --show

# Update your agent URL
nyc-restaurants config --set-agent-url https://new-and-improved-agent.run.app
```

<details>
<summary>Click to view a demo of these commands in action</summary>

```bash
python demo.py
```
This script will sequentially execute various `nyc-restaurants` commands, displaying their output in your terminal.
</details>

[‚¨ÜÔ∏è Back to Top](#%EF%B8%8F-table-of-contents)

---

## ‚ö†Ô∏è Limitations & Future Roadmap

This project is continuously evolving. Here are some known aspects and future plans.

### Current Limitations

*   **Mock Data Dependency**: When the Cloud Run agent is not deployed or configured, the CLI falls back to using local mock data. While useful for demonstration, it doesn't reflect live data.
*   **Geocoding/Alerting Agent Requirement**: The `--map` and `--alert` features rely on the backend Cloud Run agent having the capability to chain to external geocoding and alerting services. The provided `examples/cloud_run_agent.py` includes placeholder endpoints for these but might require further implementation on the backend side to be fully functional.
*   **Data Freshness**: The accuracy of the data depends on how frequently the BigQuery/GCS data sources are updated. The CLI itself does not control data ingestion.
*   **Single Restaurant Details**: The `details` command currently requires an exact restaurant name and optionally a borough; it doesn't support fuzzy matching or listing multiple matches.
*   **Rate Limits**: If interacting with external third-party geocoding or alerting APIs via the backend agent, rate limits might apply.

### Known Issues

*   **Map Generation on CI/CD**: Generating HTML maps with `folium` might require specific dependencies that are sometimes tricky in constrained CI/CD environments. Local execution is recommended.
*   **Windows Terminal Colors**: While `Rich` generally handles Windows terminals well, some older terminal emulators might have issues with full color and emoji rendering.

### Future Enhancements

We have several exciting features planned to make the NYC Restaurant Safety Finder even more powerful:

*   **Enhanced Filtering**:
    *   Filter by inspection date range.
    *   Search by specific inspection violations.
    *   Geographical radius search (e.g., "restaurants within 1 mile of X location").
*   **Advanced Details**:
    *   Display full inspection history for a restaurant.
    *   Option to view raw inspection data.
*   **CLI UX Improvements**:
    *   Autocompletion for commands and options (especially borough, cuisine).
    *   Interactive mode for guided search.
*   **Backend Enhancements**:
    *   Implement full external geocoding and alerting agent integrations in the example backend.
    *   Caching layer in the Cloud Run agent for frequently requested queries.
*   **Web UI**: Develop a simple web interface for non-technical users to access the data.
*   **Data Ingestion Pipeline**: Provide an example data pipeline (e.g., using Cloud Functions/Cloud Dataflow) for regularly updating the BigQuery data.

> üöÄ **Request a Feature**: Have an idea? Open an issue on GitHub with the `feature-request` label!

[‚¨ÜÔ∏è Back to Top](#%EF%B8%8F-table_of_contents)

---

## ü§ù Contributing

We welcome contributions from everyone! Whether it's reporting a bug, suggesting a feature, or submitting code, your help makes this project better.

### How to Contribute

1.  **Fork the repository:** Start by forking the `GDSC-FSC/gdg-fsc-x-bc-cloud-workshop` repository to your GitHub account.
2.  **Clone your forked repository:**
    ```bash
    git clone https://github.com/YOUR_USERNAME/gdg-fsc-x-bc-cloud-workshop.git
    cd gdg-fsc-x-bc-cloud-workshop
    ```
3.  **Create a new branch:** For new features or bug fixes, create a descriptive branch.
    ```bash
    git checkout -b feature/your-awesome-feature
    # or
    git checkout -b bugfix/fix-that-bug
    ```
4.  **Make your changes:** Implement your feature or bug fix.
5.  **Commit your changes:** Write clear, concise commit messages.
    ```bash
    git commit -m 'feat: Add amazing feature'
    # or
    git commit -m 'fix: Resolve critical bug in XYZ'
    ```
6.  **Push your branch to GitHub:**
    ```bash
    git push origin feature/your-awesome-feature
    ```
7.  **Open a Pull Request (PR):**
    *   Go to the original repository (`GDSC-FSC/gdg-fsc-x-bc-cloud-workshop`) on GitHub.
    *   You should see a prompt to create a new Pull Request from your branch.
    *   Provide a detailed description of your changes, reference any issues it closes, and describe how to test it.

### Development Setup

To set up your development environment and run tests:

1.  **Install development dependencies:**
    ```bash
    pip install -e ".[dev]"
    ```
    This ensures you have `pytest` and any other development tools needed.

2.  **Code Style & Linting:**
    We aim for clean, readable code. Please try to adhere to common Python style guides (e.g., PEP 8).
    *   Consider using `black` for code formatting: `black .`
    *   Consider `flake8` for linting: `flake8 nyc_restaurant_finder/`

### Running Tests

If a test suite is available (and we encourage adding one!):

```bash
pytest
```
Currently, explicit tests may be limited, but contributions to establish a robust test suite are highly valued.

[‚¨ÜÔ∏è Back to Top](#%EF%B8%8F-table_of_contents)

---

## üìú License, Credits & Contact

### License

This project is licensed under the **MIT License**. See the [LICENSE](https://github.com/GDSC-FSC/gdg-fsc-x-bc-cloud-workshop/blob/main/LICENSE) file in the repository for full details.

### Acknowledgments

*   **Google Developer Student Clubs (GDSC) FSC**: For initiating and supporting this project as part of their workshops.
*   **NYC Department of Health and Mental Hygiene**: For providing the raw health inspection data that powers this application.
*   **Typer, Rich, Pydantic, Requests, Folium**: For their excellent Python libraries that made building this CLI enjoyable and effective.
*   **Google Cloud Platform**: For providing the robust serverless infrastructure (Cloud Run, BigQuery, GCS) that enables the backend agent.

### Maintainers & Support

This project is primarily maintained by the **GDSC FSC** community.

For questions, bug reports, feature requests, or general support:
*   **Open an issue** on the [GitHub Issues page](https://github.com/GDSC-FSC/gdg-fsc-x-bc-cloud-workshop/issues).
*   **Contact GDSC FSC** directly at `gdg@fsc.edu`.

[‚¨ÜÔ∏è Back to Top](#%EF%B8%8F-table_of_contents)

---

## üìö Appendix

### FAQ

<details>
<summary>Q: What happens if the Cloud Run agent is not deployed or configured?</summary>
<p>
    A: The CLI is designed with a fallback mechanism. If the `NYC_RESTAURANTS_AGENT_URL` environment variable is not set, or if the agent is unreachable, the CLI will automatically switch to "mock data mode." This allows you to still explore the CLI's features and commands, albeit with static, predefined data instead of live inspection records.
</p>
</details>

<details>
<summary>Q: How can I generate an interactive map of restaurants?</summary>
<p>
    A: To generate an interactive HTML map, use the `--map` flag with the `search` command (e.g., `nyc-restaurants search --borough manhattan --map`). This feature relies on the backend Cloud Run agent successfully performing geocoding (converting addresses to latitude/longitude) for the restaurant locations. The resulting map will open in your default web browser.
</p>
</details>

<details>
<summary>Q: Can I use this with my own custom backend agent?</summary>
<p>
    A: Yes! The CLI is built to be flexible. As long as your custom backend agent implements the expected API endpoints (`/query`, `/geocode`, `/alert`) with the specified request/response formats (as detailed in the <a href="#agent2agent-architecture">Agent2Agent Architecture</a> section), you can configure the CLI to use your custom agent URL.
</p>
</details>

<details>
<summary>Q: How fresh is the data?</summary>
<p>
    A: The data freshness depends on the backend's data ingestion pipeline. Typically, NYC health inspection data is updated periodically (e.g., daily or weekly). The CLI queries whatever data is available in the BigQuery dataset at the time of the request.
</p>
</details>

### Troubleshooting

<details>
<summary>Issue: `nyc-restaurants` command not found.</summary>
<p>
    **Solution:** Ensure you have installed the package in editable mode: `pip install -e .`. Also, check that your Python `Scripts` directory (where `Typer` CLIs are typically linked) is in your system's `PATH` environment variable. If using a virtual environment, activate it first.
</p>
</details>

<details>
<summary>Issue: Agent connection test fails (`nyc-restaurants test-agent`).</summary>
<p>
    **Possible Causes & Solutions:**
    <ul>
        <li>**`NYC_RESTAURANTS_AGENT_URL` not set:** Verify the environment variable is correctly set (`echo $NYC_RESTAURANTS_AGENT_URL`) or passed directly (`--agent-url`).</li>
        <li>**Incorrect URL:** Double-check for typos in the agent URL.</li>
        <li>**Agent not deployed or running:** Ensure your Cloud Run agent is successfully deployed and accessible. Check its logs in the Google Cloud Console.</li>
        <li>**Network issues:** Your local machine might have firewall or network restrictions preventing access to the Cloud Run service.</li>
        <li>**Authentication (if applicable):** If your Cloud Run service requires authentication, ensure your local environment is configured to provide valid credentials (e.g., `gcloud auth login`). The example agent is set to `--allow-unauthenticated` for simplicity.</li>
    </ul>
</p>
</details>

<details>
<summary>Issue: Map not showing or displaying errors.</summary>
<p>
    **Possible Causes & Solutions:**
    <ul>
        <li>**Geocoding failed:** The `--map` feature requires the backend agent to successfully geocode restaurant addresses. If the agent's geocoding endpoint is not implemented or fails, maps cannot be generated. Check the agent's logs.</li>
        <li>**Browser security:** Sometimes browsers restrict local file access. Try opening the generated HTML file directly from your file system.</li>
        <li>**`folium` issues:** Ensure `folium` is correctly installed and that there are no underlying system issues preventing it from rendering.</li>
    </ul>
</p>
</details>

### Changelog

#### [0.1.0] - 2023-10-26
*   Initial release of the NYC Restaurant Safety Finder CLI.
*   Core `search`, `details`, `config`, and `test-agent` commands implemented.
*   Rich terminal output for search results.
*   Initial Agent2Agent client integration.
*   Basic `--map` functionality via agent chaining.
*   Mock data fallback when agent is unavailable.
*   Example Cloud Run agent provided in `examples/`.

[‚¨ÜÔ∏è Back to Top](#%EF%B8%8F-table_of_contents)